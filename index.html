<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Habify ‚Äî –æ—Ñ–ª–∞–π–Ω-—Ç—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫</title>
  <meta name="description" content="–û—Ñ–ª–∞–π–Ω —Ç—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫ –±–µ–∑ –æ–Ω–ª–∞–π–Ω–∞ –∏ –ë–î. –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ cookie.">
  <link id="manifestLink" rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <meta name="theme-color" content="#0b0c10"/>
</head>
<body>
  <div id="envWarning" class="envwarn hidden">
    ‚ö†Ô∏è –¢—ã –æ—Ç–∫—Ä—ã–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∫ <code>file://</code>. –ë—Ä–∞—É–∑–µ—Ä—ã –Ω–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç <b>cookie</b>, <b>manifest</b> –∏ <b>service worker</b> –≤ —Ç–∞–∫–æ–º —Ä–µ–∂–∏–º–µ.
    –ó–∞–ø—É—Å—Ç–∏ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (<code>python -m http.server</code> –∏–ª–∏ <code>npx serve .</code>) ‚Äî —Ç–æ–≥–¥–∞ –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.
  </div>

  <header class="hdr">
    <div class="brand">
      <div class="logo">Hf</div>
      <div>
        <div class="title">Habify</div>
        <div class="subtitle">–æ—Ñ–ª–∞–π–Ω ‚Ä¢ cookie only</div>
      </div>
    </div>
    <nav class="nav">
      <button id="btnToday" class="tab active">–°–µ–≥–æ–¥–Ω—è</button>
      <button id="btnAll" class="tab">–í—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏</button>
      <button id="btnStats" class="tab">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
    </nav>
    <div class="actions">
      <button id="btnExport" class="btn ghost">–≠–∫—Å–ø–æ—Ä—Ç</button>
      <button id="btnImport" class="btn ghost">–ò–º–ø–æ—Ä—Ç</button>
      <button id="btnTutorial" class="btn ghost">–¢—É—Ç–æ—Ä–∏–∞–ª</button>
      <button id="btnReset" class="btn danger">–°–±—Ä–æ—Å</button>
    </div>
  </header>

  <main class="wrap">
    <!-- DASHBOARD -->
    <section id="pageToday" class="page card">
      <h2>–°–µ–≥–æ–¥–Ω—è</h2>
      <p class="muted">–û—Ç–º–µ—á–∞–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ, –∫–æ–ø–∏ —Å—Ç—Ä–∏–∫–∏ –∏ XP. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –∑–∞ –¥–µ–Ω—å.</p>
      <div class="hero-grid">
        <div class="stat-card">
          <div class="kpis">
            <div><div class="small muted">–í—Å–µ–≥–æ –ø—Ä–∏–≤—ã—á–µ–∫</div><div id="statTotal" class="big">0</div></div>
            <div><div class="small muted">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è</div><div id="statDone" class="big">0</div></div>
            <div><div class="small muted">XP</div><div id="statXP" class="big">0</div></div>
          </div>
          <div class="divider"></div>
          <div class="small muted">–ù–µ–¥–µ–ª—è <span id="weekLabel"></span></div>
          <div class="progress"><span id="weekProgress"></span></div>
          <div id="todayQuick" class="quick"></div>
        </div>
        <div class="tips card-ghost">
          <div class="pill">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
          <div class="controls">
            <label class="small muted">–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏:
              <select id="weekStart"><option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option><option value="0">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option></select>
            </label>
            <label class="small muted">–¢–µ–º–∞:
              <select id="theme"><option value="auto">–ê–≤—Ç–æ</option><option value="dark">–¢—ë–º–Ω–∞—è</option><option value="light">–°–≤–µ—Ç–ª–∞—è</option></select>
            </label>
          </div>
        </div>
      </div>

      <h3 class="mt">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
      <div id="todayList" class="list"></div>
      <div id="todayEmpty" class="empty muted">–ù–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ.</div>
    </section>

    <!-- ALL HABITS -->
    <section id="pageAll" class="page card hidden">
      <div class="list-hdr">
        <h2>–ú–æ–∏ –ø—Ä–∏–≤—ã—á–∫–∏</h2>
        <div class="muted small">–í—Å–µ–≥–æ: <span id="countAll">0</span></div>
      </div>
      <div id="habitList" class="list"></div>
      <div id="empty" class="empty muted">–ü–æ–∫–∞ –ø—É—Å—Ç–æ. –ù–∞–∂–º–∏ ¬´+¬ª —Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É.</div>
    </section>

    <!-- STATS -->
    <section id="pageStats" class="page card hidden">
      <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <div id="statsGrid" class="stats-grid">
        <div class="panel"><div class="label">–õ—É—á—à–∞—è —Å–µ—Ä–∏—è (–¥–Ω–µ–π)</div><div id="bestStreak" class="big">0</div></div>
        <div class="panel"><div class="label">–í—Å–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π –∑–∞ 14 –¥–Ω–µ–π</div><div id="sum14" class="big">0</div></div>
        <div class="panel"><div class="label">–õ—É—á—à–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏</div><div id="bestDow" class="big">‚Äî</div></div>
      </div>
      <h3 class="mt">–ò—Å—Ç–æ—Ä–∏—è –∑–∞ 14 –¥–Ω–µ–π</h3>
      <div id="historyBoard" class="history-board"></div>
    </section>
  </main>

  <!-- floating add -->
  <button id="btnAdd" class="fab" title="–ù–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞">+</button>

  <!-- MODAL: add/edit -->
  <dialog id="dlgHabit">
    <form id="habitForm" method="dialog">
      <h3 id="dlgTitle">–ù–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞</h3>
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ
        <input id="fName" type="text" maxlength="64" required placeholder="–ù–∞–ø—Ä.: –ü–∏—Ç—å –≤–æ–¥—É"/>
      </label>

      <fieldset>
        <legend>–ß–∞—Å—Ç–æ—Ç–∞</legend>
        <label><input type="radio" name="mode" value="daily" checked> –ï–∂–µ–¥–Ω–µ–≤–Ω–æ</label>
        <label><input type="radio" name="mode" value="days"> –ü–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</label>
      </fieldset>

      <div id="daysSel" class="days">
        <label><input type="checkbox" value="1" checked> –ü–Ω</label>
        <label><input type="checkbox" value="2" checked> –í—Ç</label>
        <label><input type="checkbox" value="3" checked> –°—Ä</label>
        <label><input type="checkbox" value="4" checked> –ß—Ç</label>
        <label><input type="checkbox" value="5" checked> –ü—Ç</label>
        <label><input type="checkbox" value="6"> –°–±</label>
        <label><input type="checkbox" value="0"> –í—Å</label>
      </div>

      <div class="row end">
        <button type="submit" class="btn primary" id="btnSaveHabit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button type="button" class="btn" id="btnCancelHabit">–û—Ç–º–µ–Ω–∞</button>
      </div>
      <input type="hidden" id="fId" value="">
    </form>
  </dialog>

  <!-- MODAL: –∏–º–ø–æ—Ä—Ç -->
  <dialog id="dlgImport">
    <form method="dialog" id="importForm">
      <h3>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
      <textarea id="importText" placeholder="–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É"></textarea>
      <div class="row end">
        <button class="btn primary" id="btnDoImport">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button class="btn" id="btnCancelImport" type="button">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </form>
  </dialog>

  <!-- MODAL: –∏—Å—Ç–æ—Ä–∏—è (–ª—é–±–∞—è –ø—Ä–æ—à–µ–¥—à–∞—è –¥–∞—Ç–∞) -->
  <dialog id="dlgHistory">
    <form method="dialog" id="historyForm">
      <h3>–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—à–µ–¥—à—É—é –¥–∞—Ç—É</h3>
      <input type="date" id="histDate" required />
      <label>–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:
        <input type="number" id="histCount" min="0" step="1" value="1"/>
      </label>
      <div class="row end">
        <button class="btn primary" id="btnSaveHistory">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn" id="btnCancelHistory" type="button">–û—Ç–º–µ–Ω–∞</button>
      </div>
      <input type="hidden" id="histHabitId" />
    </form>
  </dialog>

  <!-- MODAL: —Ç—É—Ç–æ—Ä–∏–∞–ª -->
  <dialog id="dlgTutorial">
    <form method="dialog" id="tutorialForm" class="tutorial">
      <div class="steps">
        <div class="step active"><h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å üëã</h3><p>–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ <b>cookie</b>. –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ <b>http://localhost</b>, —á—Ç–æ–±—ã –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ.</p></div>
        <div class="step"><h3>–°–æ–∑–¥–∞–π –ø—Ä–∏–≤—ã—á–∫—É</h3><p>–ö–Ω–æ–ø–∫–∞ <b>¬´+¬ª</b> ‚Äî –∑–∞–¥–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —á–∞—Å—Ç–æ—Ç—É.</p></div>
        <div class="step"><h3>–£—á–∏—Ç—ã–≤–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑</h3><p>–ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –µ—Å—Ç—å <b>‚àí / +</b> –∏ —Å—á—ë—Ç—á–∏–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è. –î–ª—è –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–Ω–µ–π ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–ò—Å—Ç–æ—Ä–∏—è¬ª.</p></div>
        <div class="step"><h3>–≠–∫—Å–ø–æ—Ä—Ç & –æ—Ñ–ª–∞–π–Ω</h3><p>¬´–≠–∫—Å–ø–æ—Ä—Ç¬ª –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É cookie. –°–∞–π—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω–∞.</p></div>
      </div>
      <div class="row space">
        <button type="button" class="btn ghost" id="prevStep">–ù–∞–∑–∞–¥</button>
        <div class="dots" id="dots"></div>
        <button type="button" class="btn primary" id="nextStep">–î–∞–ª–µ–µ</button>
      </div>
      <label class="small muted"><input type="checkbox" id="dontShow"> –ë–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å</label>
    </form>
  </dialog>

  <div id="toast" class="toast"></div>

  <footer class="ft muted small">
    Habify ¬© 2025 ‚Ä¢ Cookie: <code>habify=base64(json)</code>
  </footer>

  <script src="app.js"></script>
</body>
</html>
